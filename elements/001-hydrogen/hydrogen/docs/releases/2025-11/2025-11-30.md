# 2025-11-30 (Sun): Terminal I/O enhancements and comprehensive testing

Installer:

- Updated installer script for 2025-11-30 [installer/hydrogen_installer_20251130.sh]

Terminal:

- Added configurable buffer size for terminal I/O bridge (default 1KB, min 256B, max 4KB) [src/terminal/terminal_shell.c, src/terminal/terminal_websocket.c, src/config/config_terminal.c, src/config/config_terminal.h]
- Added microsecond delays for rapid output processing to prevent WebSocket buffer overflow [src/terminal/terminal_shell.c, src/terminal/terminal_websocket.c]
- Improved error handling and logging in terminal I/O bridge operations [src/terminal/terminal_shell.c, src/terminal/terminal_websocket.c]
- Added test mode variables for forcing failures in unit tests [src/terminal/terminal_shell.c]

WebSocket:

- Fixed logging format in WebSocket connection establishment [src/websocket/websocket_server_connection.c]
- Improved terminal session reuse with proper I/O bridge initialization [src/websocket/websocket_server_connection.c]
- Removed obsolete shutdown timeout handling [src/websocket/websocket_server.c]

Configuration:

- Increased WebSocket maximum message size to 8192 bytes [src/config/config_defaults.c]
- Added buffer_size configuration parameter for terminal subsystem [src/config/config_terminal.c, src/config/config_terminal.h]
- Added index_page configuration parameter for terminal webroot [src/config/config_terminal.c, src/config/config_terminal.h]

mDNS:

- Added proper initialization of mDNS server instance [src/mdns/mdns_server_init.c]

Testing:

- Added comprehensive unit tests for WebSocket terminal functionality with 75%+ coverage [tests/unity/src/websocket/websocket_server_terminal_test_comprehensive.c]
- Added unit tests for terminal shell mock failure scenarios [tests/unity/src/terminal/terminal_shell_test_mock_failures.c]
- Added unit tests for terminal request handling and URL validation [tests/unity/src/terminal/terminal_test_request_handling.c, tests/unity/src/terminal/terminal_test_url_validation.c]
- Added mock implementation for pthread functions [tests/unity/mocks/mock_pthread.c, tests/unity/mocks/mock_pthread.h]
- Updated CMake configuration for unity testing framework [cmake/CMakeLists-unity.cmake]

Documentation:

- Updated README.md with corrected TODO documentation link and added Mirage Proxy reference [README.md]
- Enhanced STRUCTURE.md with table of contents, Database UDFs section, and expanded CMake configuration details [STRUCTURE.md]
- Added comprehensive Mirage Proxy documentation [docs/MIRAGE.md]

Other:

- Added metrics files for 2025-11-30 [docs/metrics/2025-11/2025-11-30.json, docs/metrics/2025-11/2025-11-30.txt]
- Updated test database artifacts [test.sql]