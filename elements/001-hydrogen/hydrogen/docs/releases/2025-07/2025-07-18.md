# Release Notes - July 18, 2025

## Testing Framework SVG Visualization

**Oh.sh Integration:**

- Added Oh.sh terminal-to-SVG converter to test libraries [tests/lib/Oh.sh]
- Integrated Oh.sh documentation into project structure [tests/docs/Oh.md]
- Updated test library documentation to include Oh.sh converter [tests/docs/LIBRARIES.md]

**SVG Generation:**

- Implemented efficient SVG generation for coverage analysis [tests/test_00_all.sh]
- Added COVERAGE.svg auto-generation from coverage table output [tests/test_00_all.sh]
- Added COMPLETE.svg auto-generation from test results table [tests/test_00_all.sh]
- Enhanced SVG generation using tee for output efficiency [tests/test_00_all.sh]

**Documentation Updates:**

- Added COVERAGE.svg and COMPLETE.svg to project structure documentation [STRUCTURE.md]
- Updated sitemap to include Oh.sh documentation and SVG files [SITEMAP.md]
- Integrated Oh.sh into test libraries section [STRUCTURE.md]

**Technical Implementation:**

- Modified test_00_all.sh to use background processes for SVG generation
- Implemented file-based SVG generation for improved efficiency
- Added output file management to build/tests/results directory
- Configured automatic SVG generation during test suite execution
- Added visual reports line to README.md generation with SVG links
- Updated test_00_all.sh version to 4.2.0 with comprehensive changelog

## Build System Optimization

**Artifact Duplication Resolution:**

- Fixed inconsistent directory handling in CMake build system [cmake/CMakeLists.txt]
- Eliminated duplicate build artifacts in cmake/ and build/ directories [cmake/CMakeLists.txt]
- Standardized all build outputs to use build/<target> directory structure [cmake/CMakeLists.txt]
- Updated coverage, regular, and Unity test build paths for consistency [cmake/CMakeLists.txt]

**Ninja Build System Activation:**

- Cleaned legacy Makefile configuration preventing Ninja usage [cmake/CMakeLists.txt]
- Activated proper CMake preset usage with Ninja generator [cmake/CMakePresets.json]
- Enabled 20-40% faster build performance with Ninja vs Make [cmake/CMakeLists.txt]
- Verified build.ninja file generation and parallel build optimization [cmake/CMakeLists.txt]

## Test Performance Optimization

**Code Size Analysis Performance:**

- Improved test_03_code_size.sh execution time by 46% (3.136s to 1.705s) [tests/test_03_code_size.sh]
- Implemented background cloc analysis during file processing [tests/test_03_code_size.sh]
- Replaced 519 individual wc -l calls with single batch operation [tests/test_03_code_size.sh]
- Added parallel file type counting using background processes [tests/test_03_code_size.sh]
- Enhanced large file display with largest-to-smallest sorting [tests/test_03_code_size.sh]

**Array-Based Output Collection System:**

- Implemented automatic array-based output collection for all test scripts [tests/lib/log_output.sh]
- Added transparent performance optimization requiring zero script modifications [tests/lib/log_output.sh]
- Enhanced all logging functions to support collection mode (print_output, print_message, print_result, print_subtest) [tests/lib/log_output.sh]
- Integrated automatic collection activation in print_test_header() and output dump in print_test_completion() [tests/lib/log_output.sh]
- Fixed subshell issues in test scripts using process substitution to ensure complete output capture [tests/test_03_code_size.sh]

**Technical Implementation:**

- Used xargs wc -l for efficient batch line counting [tests/test_03_code_size.sh]
- Implemented parallel find commands with background execution [tests/test_03_code_size.sh]
- Added nproc-based parallelization for optimal CPU utilization [tests/test_03_code_size.sh]
- Fixed associative array handling to avoid subshell issues [tests/test_03_code_size.sh]
- Centralized output collection in OUTPUT_COLLECTION array with single dump operation [tests/lib/log_output.sh]
- Maintained complete backward compatibility with existing test script patterns [tests/lib/log_output.sh]

## Test Framework Organization

**Test Renumbering:**

- Renumbered test_10_leaks_like_a_sieve.sh to test_19_leaks_like_a_sieve.sh for improved test suite ordering [tests/test_19_leaks_like_a_sieve.sh]
- Renumbered test_20_crash_handler.sh to test_13_crash_handler.sh for improved test suite ordering [tests/test_13_crash_handler.sh]
- Updated all documentation references to reflect new test numbering [tests/README.md, STRUCTURE.md, SITEMAP.md, RECIPE.md]
- Renamed corresponding test documentation files [tests/docs/test_19_leaks_like_a_sieve.md, tests/docs/test_13_crash_handler.md]

## Files Modified

- [cmake/CMakeLists.txt](../../../cmake/CMakeLists.txt) - Build system optimization and artifact consolidation
- [tests/test_03_code_size.sh](../../../tests/test_03_code_size.sh) - Performance optimization, sorting improvements, and subshell fixes
- [tests/lib/log_output.sh](../../../tests/lib/log_output.sh) - Array-based output collection system implementation
- [tests/test_00_all.sh](../../../tests/test_00_all.sh) - SVG generation integration
- [STRUCTURE.md](../../../STRUCTURE.md) - Documentation structure updates
- [SITEMAP.md](../../../SITEMAP.md) - Sitemap documentation updates
- [tests/docs/LIBRARIES.md](../../../tests/docs/LIBRARIES.md) - Library documentation updates
- [tests/README.md](../../../tests/README.md) - Test documentation updates for renumbering
- [RECIPE.md](../../../RECIPE.md) - Test list updates for renumbering
- [tests/test_19_leaks_like_a_sieve.sh](../../../tests/test_19_leaks_like_a_sieve.sh) - Renamed from test_10_leaks_like_a_sieve.sh
- [tests/docs/test_19_leaks_like_a_sieve.md](../../../tests/docs/test_19_leaks_like_a_sieve.md) - Renamed documentation file
- [tests/test_13_crash_handler.sh](../../../tests/test_13_crash_handler.sh) - Renamed from test_20_crash_handler.sh
- [tests/docs/test_13_crash_handler.md](../../../tests/docs/test_13_crash_handler.md) - Renamed documentation file